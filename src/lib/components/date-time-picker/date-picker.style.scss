@import 'themes/functions';
@import 'mixins';
@import 'functions';

$padding_days-area-container: 0 rems(1) rems(0.5) rems(1);
$padding_days-area: 0 rems(1);
$margin_days-line: 0 0 px(6) 0;
$width_days-line-item: calc(100% / 7);
$font-size_days-line-item: rems(0.75);
$font-weight_days-line-item: 600;
$height_date: px(24);
$box-shadow: 0 rems(0.5) rems(2) 0 rgba(0, 0, 0, 0.1);

$width_year: calc(100% / 5);
$height_year: px(24);

$width_month: px(64);
$height_month: px(24);

.date-picker {
  all: unset;
  box-shadow: $box-shadow;
  border-radius: rems(0.5);
  background: color(white);
  @include flex-container(column, stretch, stretch, nowrap);

  &__header {
    height: px(36);
    width: 100%;
    box-sizing: border-box;
    padding: $padding_days-area;
    @include flex-container(row, center, space-between, nowrap);
  }

  &__week-days {
    height: rems(1.5625);
    width: 100%;
    padding: $padding_days-area;
    margin: $margin_days-line;
    box-sizing: border-box;
    background: color(light);
    @include flex-container(row, center, space-between, nowrap);
  }

  &__wrapper {
    width: 100%;
    padding: $padding_days-area-container;
    box-sizing: border-box;
    overflow: hidden;
    @include flex-container(row, flex-start, flex-start, wrap);
  }

  &__row {
    @include flex-container(column, stretch, stretch, nowrap);
  }
}

.title {
  all: unset;
  font-size: variable(font-size_base-text);
  color: color(main);
  line-height: 1.43;
  font-weight: normal;
  font-style: normal;
  font-stretch: normal;
  user-select: none;
  display: flex;
  @include regular;

  &__month:not(.disable-hover),
  &__year:not(.disable-hover) {
    transition: color 0.2s ease;
    &:hover {
      color: color(active);
      cursor: pointer;
    }
  }

  &.selected {
    color: color(active);
    cursor: default;
  }
}

.week-day {
  all: unset;
  color: color(grey-light);
  width: $width_days-line-item;
  font-size: $font-size_days-line-item;
  font-weight: normal;
  user-select: none;
  @include regular;
  @include flex-container(column, center, center, nowrap);
}

.date-wrapper {
  position: relative;
  cursor: pointer;
  background-color: transparent;

  width: $width_days-line-item;
  height: $height_date;

  margin-bottom: px(6);

  padding: 0;

  user-select: none;
  @include regular;
  @include flex-container(column, center, center, nowrap);

  &__range {
    background-color: color(light);
  }

  &:nth-child(7n) {
    border-top-right-radius: $height_date;
    border-bottom-right-radius: $height_date;

    .date__range-start {
      &::before {
        display: none;
      }
    }
  }

  &:nth-child(7n + 1) {
    border-top-left-radius: $height_date;
    border-bottom-left-radius: $height_date;

    .date__range-end {
      &::before {
        display: none;
      }
    }
  }

  &__first {
    &.date-wrapper__range {
      border-bottom-left-radius: $height_date;
      border-top-left-radius: $height_date;
    }
  }

  &__last {
    &.date-wrapper__range {
      border-bottom-right-radius: $height_date;
      border-top-right-radius: $height_date;
    }
  }

  &__disabled {
    pointer-events: none;
    .date__range-start,
    .date__range-end {
      &::before {
        display: none;
      }
    }
  }
}

.date {
  position: relative;

  width: $height_date;
  height: $height_date;

  @include flex-container(column, center, center, nowrap);

  &__range-start {
    &::before {
      position: absolute;
      content: '';
      top: 0;
      left: 0;
      width: 200%;
      height: 100%;
      background-color: color(light);
      border-bottom-left-radius: $height_date;
      border-top-left-radius: $height_date;
      z-index: 0;
    }
  }

  &__range-end {
    &::before {
      position: absolute;
      content: '';
      top: 0;
      right: 0;
      width: 200%;
      height: 100%;
      background-color: color(light);
      border-bottom-right-radius: $height_date;
      border-top-right-radius: $height_date;
      z-index: 0;
    }
  }
}

.date-inner {
  font-size: $font-size_days-line-item;
  color: color(text);
  line-height: rems(1);
  font-weight: normal;
  position: relative;

  width: 100%;
  height: 100%;
  border-radius: 100%;
  @include transition(#{'color, background-color'});

  @include flex-container(column, center, center, nowrap);

  z-index: 2;

  &__selected {
    background-color: color(active);
    color: color(white);
  }

  &__disabled {
    color: color(grey-apple);
    pointer-events: none;
  }

  &:hover:not(.date-inner__selected) {
    background-color: color(light);
    color: color(text);
  }
}

.year {
  position: relative;
  appearance: none;
  outline: none;
  cursor: pointer;
  border: none;
  background: none;
  width: $width_year;
  height: $height_year;
  font-size: $font-size_days-line-item;
  margin: px(3) 0;
  color: color(text);
  line-height: rems(1);
  font-weight: normal;
  user-select: none;
  border-radius: $height_year;
  z-index: 2;
  min-width: auto;
  outline-offset: unset;
  padding: 0;

  @include transition(#{'background, color'});
  @include regular;
  @include flex-container(column, center, center, nowrap);

  &.current {
    background-color: color(light);
    color: color(text);
  }
  &:hover {
    background-color: color(active);
    color: color(white);
  }
}

.month {
  position: relative;
  appearance: none;
  outline: none;
  cursor: pointer;
  border: none;
  background: none;
  width: $width_month;
  height: $height_month;
  font-size: $font-size_days-line-item;
  margin: px(3) 0;
  color: color(text);
  line-height: rems(1);
  font-weight: normal;
  user-select: none;
  border-radius: $height_month;
  z-index: 2;
  @include transition(#{'background, color'});
  @include regular;
  @include flex-container(column, center, center, nowrap);

  &:hover {
    background-color: color(active);
    color: color(white);
  }
}

.arrow-button {
  all: unset;
  height: rems(1.25);
  background: none;
  outline: none;
  border: none;
  appearance: none;
  margin: 0;
  padding: 0;
  font-weight: $font-weight_days-line-item;
  font-size: rems(1);
  color: color(grey-apple);
  cursor: pointer;
  display: flex;
  align-items: center;
  @include regular;

  &.not-showing {
    visibility: hidden;
    pointer-events: none;
  }
}
