<div class="chip-select">
  <pupa-droppable *ngIf="!readonly">
    <pupa-droppable-trigger>
      <pupa-chip-button #addChips [disabled]="readonly" [color]="'dark'">
        <div class="chip-select__chip-add-button">Добавить</div>
        <pupa-icon name="add"></pupa-icon>
      </pupa-chip-button>
    </pupa-droppable-trigger>
    <pupa-droppable-content>
      <div *ngIf="isEmpty; else treeItems" class="empty">Список пуст</div>
    </pupa-droppable-content>
  </pupa-droppable>

  <pupa-chip *ngFor="let selectItem of selectItems; index as index" [color]="'normal-light'">
    <div class="chip-select__chip-icon-container">
      <button
        *ngIf="!readonly"
        class="chip-select__chip-icon chip-select__chip-icon_remove"
        (click)="removeItem($event, selectItem)"
        title="Удалить"
        type="button"
      >
        <pupa-icon name="trash"></pupa-icon>
      </button>

      <pupa-icon class="chip-select__chip-icon" *ngIf="selectItem?.icon" [name]="selectItem.icon"></pupa-icon>
    </div>
    <span>{{ selectItem.value }}</span>
  </pupa-chip>
</div>

<ng-template #treeItems>
  <pupa-chip-select-tree
    [items]="items"
    (selectItemKey)="clickDroppableItem($event)"
    [notActiveKeys]="notActiveKeys"
    searchText="Поиск..."
  ></pupa-chip-select-tree>
</ng-template>
