@import 'themes/functions';
@import 'mixins';
@import 'functions';

$width_switcher: rems(2.8125);
$padding-side_swither-icon: calc($width_switcher - variable(font-size_base-text));

:host {
  z-index: 555;
  width: auto;
  overflow: hidden;

  &_expandable {
    width: $width_switcher;
    overflow: visible;
  }
}

.search-field {
  z-index: 555;
  height: rems(2);
  width: $width_switcher;
  position: relative;
  @include transition(width);
  @include flex-container(row, center, space-between, nowrap);

  &_expanded {
    width: 100%;
    overflow: visible;
  }

  &:not(.search-field_expandable) {
    width: rems(16);
  }

  &:not(.search-field_expandable):not(.search-field_disabled).search-field_empty:hover {
    .search-field__switcher {
      color: color(active);
    }
    .search-field__control {
      cursor: pointer;

      &:focus {
        cursor: text;
      }
      &::placeholder {
        color: color(grey-ivory);
      }
    }
  }
}

.search-field.search-field_expandable {
  top: 0;
  right: 0;
  position: absolute;
  overflow: hidden;

  .search-field__control {
    width: $width_switcher;
    padding: rems(0.5);
  }
}

.search-field:not(.search-field_disabled).search-field_outlined {
  .search-field__switcher {
    border: 1px solid transparent;

    .search-field__switcher-icon {
      background: color(white);
    }
  }
  .search-field__control {
    background: color(white);
    border: 1px solid color(grey-apple);
  }
}

.search-field__switcher {
  z-index: 1003;
  order: 2;
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  width: $width_switcher;
  height: rems(2);
  border-radius: rems(1.375);
  background: transparent;
  border: none;
  outline: none;
  cursor: pointer;
  font-size: variable(font-size_base-text);
  color: color(grey-ivory);
  position: absolute;
  top: 0;
  right: 0;
  @include transition(color);
  @include flex-container(column, center, center, nowrap);

  .search-field__switcher-icon {
    box-sizing: content-box;
    padding: 0 calc((#{$width_switcher} - #{variable(font-size_base-text)}) / 3);
    background: color(light);
  }
}

.search-field:not(.search-field_disabled) {
  .search-field__switcher:hover {
    color: color(active);
  }
}

.search-field__control {
  z-index: 1002;
  order: 1;
  height: rems(2);
  width: 100%;
  box-sizing: border-box;
  border-radius: rems(1.375);
  background: color(light);
  border: none;
  outline: none;
  font-size: variable(font-size_base-text);
  padding: rems(0.5) $width_switcher rems(0.5) rems(0.75);
  position: absolute;
  top: 0;
  right: 0;

  &::placeholder {
    color: color(grey-light);
    user-select: none;
    @include transition(color);
  }
}

.search-field_disabled {
  .search-field__switcher {
    cursor: default;
    background: color(grey-apple);
    .search-field__switcher-icon {
      background: inherit;
      color: color(grey-light);
    }
  }
  .search-field__control {
    background: color(grey-apple);
  }
  .search-field__control::placeholder {
    color: color(grey-light);
  }
}
