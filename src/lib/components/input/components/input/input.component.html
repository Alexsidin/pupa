<ng-container *ngIf="!isDateInput">
  <input
    #inputElement
    class="input"
    [type]="type"
    [value]="value"
    [placeholder]="placeholder"
    [ngClass]="{
      input_valid: touched && valid && !disabled,
      input_invalid: touched && !valid && !disabled,
      input_medium: size === 'medium',
      input_small: size === 'small',
      input_large: size === 'large',
      input_transparent: transparent
    }"
    [id]="id"
    [name]="name"
    [attr.disabled]="disabled ? true : null"
    [readOnly]="readonly"
    (input)="updateValue(inputElement.value)"
    [autocomplete]="autocomplete ? 'on' : 'off'"
  />
  <div class="icon" *ngIf="showValidateIcon && valid && !disabled">
    <ion-icon name="ios-checkmark-circle"></ion-icon>
  </div>
</ng-container>

<ng-container *ngIf="isDateInput">
  <div
    class="input"
    (click)="showDatePicker($event)"
    #dateInputElement
    [ngClass]="{
      input_range: type === 'date-range',
      input_valid: touched && valid,
      input_invalid: touched && !valid,
      input_medium: size === 'medium',
      input_small: size === 'small'
    }"
  >
    <span *ngIf="type === 'date'" class="input__text">
      {{ isDate(value) ? (value | date: 'dd.MM.yyyy') : null }}
    </span>
    <span *ngIf="type === 'date-range'" class="input__text input__text_range">
      {{ isDate(getRangeStart(value)) ? (getRangeStart(value) | date: 'dd.MM.yyyy') : null }}
      â€“
      {{ isDate(getRangeEnd(value)) ? (getRangeEnd(value) | date: 'dd.MM.yyyy') : null }}
    </span>
    <div class="icon icon_calendar">
      <ion-icon name="ios-calendar"></ion-icon>
    </div>

    <pupa-droppable-legacy
      [ngSwitch]="type === 'date'"
      [open]="isDatePickerVisible"
      [anchor]="dateInputElement"
      [maxWidth]="null"
      class="droppable"
    >
      <pupa-datepicker
        *ngSwitchCase="true"
        selectionMode="date"
        (date)="updateValue($event)"
        [selectedDate]="$any(value)"
      ></pupa-datepicker>
      <pupa-datepicker
        *ngSwitchDefault
        selectionMode="range"
        (range)="updateValue($event)"
        [selectedRange]="$any(value)"
      ></pupa-datepicker>
    </pupa-droppable-legacy>
  </div>
</ng-container>
