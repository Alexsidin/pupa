<div class="base-input-container time" [class.fixed-size]="isFixedSize$ | async">
  <pupa-droppable #droppable>
    <pupa-droppable-trigger class="dropdown-trigger">
      <div
        class="time-input-container"
        (click)="handleContainerClick($event)"
        (mousedown)="handleContainerStartEvents($event)"
      >
        <!-- NOTE: ngModel is incorrect: use other mask instead -->
        <input
          class="input"
          #inputElement
          type="text"
          placeholder=""
          [mask]="'00:00'"
          [maxLength]="maxLengthInputValue"
          [attr.disabled]="(isDisabled$ | async) ? true : null"
          [ngClass]="resultClassList$ | async"
          [style.paddingRight.px]="rightPadding$ | async"
          (input)="updateValue(inputElement.value)"
          (focus)="emitFocusEvent($event)"
          (blur)="emitBlurEvent($event)"
          [autocomplete]="autocomplete ? 'on' : 'off'"
          [value]="value$ | async"
          [ngModel]="value$ | async"
        />
        <div class="time-input-container__shape-container">
          <span class="time-input-container__shape-left">{{ placeholderPreviewLeft$ | async }}</span>
          <span class="time-input-container__shape-right">{{ placeholderPreviewRight$ | async }}</span>
        </div>
        <div class="input__icons-list" [ngClass]="size$ | async">
          <pupa-button-icon
            class="input__icon input__icon-calendar"
            [icon]="dateToResetSwitcherEnabled$ | conditionAsync: 'ios-close-circle-outline':'ios-calendar'"
            size="small"
            (mouseout)="handleIconHover($event, false)"
            (mouseover)="handleIconHover($event, true)"
            kind="subtle"
            (click)="reset()"
          >
          </pupa-button-icon>
          <pupa-button-icon
            *ngIf="isInvalid$ | async"
            class="input__icon input__icon-invalid"
            icon="ios-information-circle-outline"
            kind="subtle-danger"
            size="small"
            [pupaTooltip]="invalidTooltip"
            [tooltipHideOnHover]="invalidTooltipHideOnHover"
            [tooltipDisabled]="!invalidTooltip && !invalidTooltipContentTemplate ? true : invalidTooltipDisabled"
            [tooltipContentTemplate]="invalidTooltipContentTemplate"
            (click)="inputElement.focus()"
          >
          </pupa-button-icon>
        </div>
      </div>
    </pupa-droppable-trigger>
    <pupa-droppable-native-content>
      <pupa-time-picker
        (click)="emitFocusEvent($event)"
        [hours]="hours$ | async"
        [minutes]="minutes$ | async"
        *ngIf="droppable.isOpened"
        (selectedHours)="selectHours($event)"
        (selectedMinutes)="selectMinutes($event)"
      ></pupa-time-picker>
    </pupa-droppable-native-content>
  </pupa-droppable>
</div>
