<div class="chip-select">
  <pupa-chip-button #addChips>
    <div class="chip-select__chip-add-button">Добавить</div>
    <ion-icon name="add"></ion-icon>
  </pupa-chip-button>
  <pupa-chip
    *ngFor="let selectItem of selectItems; index as index"
    (mouseenter)="updateExpandedButtonIndex(index)"
    (mouseleave)="updateExpandedButtonIndex(null)"
  >
    <div class="chip-select__chip-icon">
      <button
        [@isHovered]="buttonAnimationState(expandedButtonIndex$ | async, index)"
        class="chip-select__chip-remove"
        (click)="removeItem($event, selectItem)"
        title="Удалить"
      >
        <ion-icon name="trash"></ion-icon>
      </button>
      <ion-icon *ngIf="selectItem?.icon" [name]="selectItem.icon"></ion-icon>
    </div>
    <span>{{ selectItem.value }}</span>
  </pupa-chip>
  <pupa-droppable [anchor]="addChips.chipButtonElement.nativeElement" [maxWidth]="200">
    <pupa-tree
      [items]="items"
      (selectItemKey)="clickDroppableItem($event)"
      [notActiveKeys]="notActiveKeys"
      searchText="Поиск..."
    ></pupa-tree>
  </pupa-droppable>
</div>
