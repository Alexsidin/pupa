<div class="base-input-container date" [class.fixed-size]="isFixedSize$ | async">
  <pupa-droppable #droppable>
    <pupa-droppable-trigger class="dropdown-trigger">
      <div
        class="time-input-container"
        (click)="handleContainerClick($event)"
        (mousedown)="handleContainerStartEvents($event)"
      >
        <!-- NOTE: ngModel is incorrect: use other mask instead -->
        <input
          class="input"
          [class.on-hover]="placeholderOnHover$ | async"
          #inputElement
          type="text"
          placeholder=""
          [mask]="'00.00.0000'"
          [maxLength]="maxLengthInputValue"
          [attr.disabled]="(isDisabled$ | async) ? true : null"
          [ngClass]="resultClassList$ | async"
          [style.paddingRight.px]="rightPaddingPx$ | async"
          (input)="updateValue(inputElement.value)"
          (focus)="emitFocusEvent($event)"
          (blur)="emitBlurEvent($event)"
          [autocomplete]="autocomplete ? 'on' : 'off'"
          [value]="value$ | async"
          [ngModel]="value$ | async"
          [style.paddingRight.px]="rightPaddingPx$ | async"
        />
        <div class="time-input-container__shape-container">
          <span class="time-input-container__shape-left">{{ placeholderPreviewLeft$ | async }}</span>
          <span class="time-input-container__shape-right">{{ placeholderPreviewRight$ | async }}</span>
        </div>
        <div class="input__icons-list" [ngClass]="size$ | async">
          <pupa-button-icon
            class="input__icon input__icon-calendar"
            [icon]="dateToResetSwitcherEnabled$ | conditionAsync: 'app-cross-circle':'app-calendar'"
            size="small"
            tabIndex="-1"
            (mouseout)="handleIconHover($event, false)"
            (mouseover)="handleIconHover($event, true)"
            kind="subtle"
            (click)="reset()"
          >
          </pupa-button-icon>
          <pupa-button-icon
            *ngIf="isInvalid$ | async"
            class="input__icon input__icon-invalid"
            icon="app-info"
            kind="danger-subtle"
            size="small"
            tabIndex="-1"
            [pupaTooltip]="invalidTooltip"
            [tooltipHideOnHover]="invalidTooltipHideOnHover"
            [tooltipDisabled]="!invalidTooltip && !invalidTooltipContentTemplate ? true : invalidTooltipDisabled"
            [tooltipContentTemplate]="invalidTooltipContentTemplate"
            (click)="inputElement.focus()"
          >
          </pupa-button-icon>
        </div>
      </div>
    </pupa-droppable-trigger>
    <pupa-droppable-native-content>
      <pupa-date-picker
        *ngIf="droppable.isOpened"
        [selectedDate]="date$ | async"
        [selectionMode]="'date'"
        [isBackDating]="isBackDating$ | async"
        [availableEndDate]="availableEndDate$ | async"
        (click)="handleFocusEvent($event)"
        (date)="selectDate($event)"
        [previewMode]="'simple'"
      ></pupa-date-picker>
    </pupa-droppable-native-content>
  </pupa-droppable>
</div>
