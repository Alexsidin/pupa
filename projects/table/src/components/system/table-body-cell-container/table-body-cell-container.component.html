<ng-container *ngIf="isTreeRow$ | async; then treeCellTemplate else baseCellTemplate"></ng-container>

<ng-template #treeCellTemplate>
    <div class="table-body-tree-cell-container">
        <span 
          class="table-body-tree-cell-container__indent" 
          [style.--tree-level]="treeLevel$ | async"
        ></span>
        <pupa-button-icon 
          class="table-body-tree-cell-container__expander"
          [class.table-body-tree-cell-container__expander_hidden]="!(hasExpander$ | async)" 
          [icon]="iconName$ | async" 
          kind="secondary"
          size="s"
        ></pupa-button-icon>
        <ng-container [ngTemplateOutlet]="baseCellTemplate" [ngTemplateOutletContext]="this"></ng-container>
    </div>
</ng-template>

<ng-template #baseCellTemplate>
    <ng-container
        *ngIf="!column.definition.rerenderOnRowOrColumnChanges"
        [ngTemplateOutlet]="templateRef"
        [ngTemplateOutletContext]="templateContext"
    ></ng-container>
    <ng-container *ngIf="column.definition.rerenderOnRowOrColumnChanges" #viewContainerRef></ng-container>
</ng-template>


<!-- <ng-container
  *ngIf="!column.definition.rerenderOnRowOrColumnChanges; else viewContainerRef"
  [ngTemplateOutlet]="templateRef"
  [ngTemplateOutletContext]="templateContext"
></ng-container>

<ng-container *ngIf="column.definition.rerenderOnRowOrColumnChanges" #viewContainerRef></ng-container> -->
